<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>
      Capital Delivery - Cargo, Logistics & Transport - Track orders
    </title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.png" />
    <!-- Place favicon.ico in the root directory -->
    <!-- CSS here -->
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/animate.min.css" />
    <link rel="stylesheet" href="css/magnific-popup.css" />
    <link rel="stylesheet" href="css/fontawesome-all.min.css" />
    <link rel="stylesheet" href="css/aos.css" />
    <link rel="stylesheet" href="css/nice-select.css" />
    <link rel="stylesheet" href="css/flaticon.css" />
    <link rel="stylesheet" href="css/meanmenu.css" />
    <link rel="stylesheet" href="css/slick.css" />
    <link rel="stylesheet" href="css/default.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/responsive.css" />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="sweetalert2.min.js"></script>
    <link rel="stylesheet" href="sweetalert2.min.css" />
  </head>
  <body>
    <section class="login-section">
      <div class="container">
        <div class="row mt-5">
          <div class="col-md-4"></div>
          <div class="col-md-4 formBro">
            <div class="formsPlace mt-5">
              <form id="loginForm">
                <p>
                  <input
                    id="username"
                    class="form-control"
                    type="text"
                    aria-label="username"
                    placeholder="Username"
                    required
                  />
                </p>
                <p>
                  <input
                    id="passkey"
                    class="form-control"
                    type="password"
                    aria-label="password"
                    placeholder="Password"
                    required
                  />
                </p>
                <button class="btn btn-warning btn-block" type="submit">
                  Login
                </button>
              </form>
            </div>
            <small>click to </small
            ><strong class="cursor-pointer move mt-5" onclick="showResets()"
              >Change password</strong
            >
            <div class="reset moveDown" id="resetSection">
              <br />
              <form id="resetLogins">
                <p>
                    <input
                        class="form-control input"
                        type="text"
                        placeholder="Set new username"
                        aria-label="Username reset"
                        id="resetUsername"
                        required
                    />
                </p>
                <p>
                    <input
                        class="form-control input"
                        type="password"
                        placeholder="Set new password"
                        aria-label="Password reset"
                        id="resetKey"
                        required
                    />
                </p>
                <button type="submit" class="btn btn-danger">Reset</button>
            </form>
            </div>
          </div>
          <div class="col-md-4"></div>
        </div>
      </div>
    </section>

    

    <!-- RESET LOGIN DETAILS STARTS HERE -->
  
  
  <script>
      document.getElementById("resetLogins").addEventListener("submit", function (event) {
          event.preventDefault(); // Prevent the default form submission
  
          // Retrieve username and password from input fields
          const newUsername = document.getElementById("resetUsername").value;
          const newPassword = document.getElementById("resetKey").value;
  
          // Create an object with the data to be sent
          const newData = {
              username: newUsername,
              password: newPassword
          };
  
          // Make a POST request to the endpoint
          fetch("https://sheetdb.io/api/v1/pvktjphw9pn00", {
              method: "POST",
              headers: {
                  "Content-Type": "application/json"
              },
              body: JSON.stringify(newData)
          })
          .then(response => {
              if (!response.ok) {
                  throw new Error("Network response was not ok");
              }
              return response.json(); // Parse response JSON
          })
          .then(data => {
              console.log("Data successfully sent:", data);
              // Optionally, you can perform additional actions after successful submission
              // alert("Reset successful!");
              Swal.fire("password as been reset successfully");
              setTimeout(() => {
                location.reload();
            }, 2000);

               // Reset form fields
            document.getElementById("resetUsername").value = "";
            document.getElementById("resetKey").value = "";
          })
          .catch(error => {
              console.error("Error:", error);
              // Handle errors from fetch or parsing response
              alert("Error occurred while resetting. Please try again later.");
          });
      });
  </script>
  
    <!-- LOGIN SCRIPT BELLOW STARTS HERE -->
    <script>
      document
        .getElementById("loginForm")
        .addEventListener("submit", function (event) {
          event.preventDefault(); // Prevent the default form submission

          // Step 1: Retrieve username and password from form fields
          const username = document.getElementById("username").value;
          const password = document.getElementById("passkey").value;

          // Step 2: Make API call to fetch data
          fetch("https://sheetdb.io/api/v1/pvktjphw9pn00")
            .then((response) => {
              // Check if response is successful
              if (!response.ok) {
                throw new Error("Network response was not ok");
              }
              return response.json(); // Parse response JSON
            })
            .then((apiResponse) => {
              // Step 3: Save the API response
              // Step 4: Compare username and password with API response
              const user = apiResponse.find(
                (user) =>
                  user.username === username && user.password === password
              );
              if (user) {
                // If both username and password are correct, display success message
                // alert("Correct credentials");
                swal.fire({
                  text: "login successful",
                });
                window.location.href = "dashboard.html";
              } else {
                // If either username or password is incorrect, display error message
                // alert("Wrong information supplied");
                swal.fire({
                  text: "that your login details no correct o bro",
                });
              }
            })
            .catch((error) => {
              // Handle errors from fetch or parsing response
              console.error("Error:", error);
            });
        });
    </script>
    <!-- LOGIN SCRIPT ENDS HERE -->

    <script>
      function showResets() {
        document.getElementById("resetSection").style.display = "block";
      }
    </script>

    <style>
      .cursor-pointer {
        cursor: pointer;
      }
      /* .input{
        position: relative;
        top: 3em;
      } */
      .moveDown {
        margin-top: 32px;
        display: none;
      }
    </style>

    <script src="js/vendor/jquery-1.12.4.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/isotope.pkgd.min.js"></script>
    <script src="js/slick.min.js"></script>
    <script src="js/jquery.meanmenu.min.js"></script>
    <script src="js/ajax-form.js"></script>
    <script src="js/wow.min.js"></script>
    <script src="js/aos.js"></script>
    <script src="js/paroller.js"></script>
    <script src="js/jquery.waypoints.min.js"></script>
    <script src="js/jquery.counterup.min.js"></script>
    <script src="js/jquery.nice-select.min.js"></script>
    <script src="js/jquery.scrollUp.min.js"></script>
    <script src="js/imagesloaded.pkgd.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCo_pcAdFNbTDCAvMwAD19oRTuEmb9M50c"></script>
    <script src="js/plugins.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>
